(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7211],{6462:function(e,t,n){Promise.resolve().then(n.bind(n,4422))},4422:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var s=n(7437),i=n(2265),r=n(605),a=n(7992),o=n(2869),c=n(6815),d=n(1828),l=n(6070),u=n(2021);function f(){let{data:e,status:t}=(0,r.useSession)(),{toast:n}=(0,a.pm)(),[f,h]=(0,i.useState)(!0),[m,p]=(0,i.useState)(!0),[g,x]=(0,i.useState)(!0),[v,b]=(0,i.useState)(!0),[y,j]=(0,i.useState)(!0),[w,_]=(0,i.useState)(!0),[N,k]=(0,i.useState)(!0),[S,T]=(0,i.useState)(!1),[C,E]=(0,i.useState)(null),[A,O]=(0,i.useState)(!1);(0,i.useEffect)(()=>{"authenticated"===t&&(null==e?void 0:e.accessToken)&&D()},[e,t]);let D=async()=>{if(null==e?void 0:e.accessToken)try{let t=await fetch("http://localhost:8002/users/me/notifications",{headers:{Authorization:"Bearer ".concat(e.accessToken)}});if(t.ok){let e=await t.json();h(e.on_new_comment),p(e.on_new_follower),x(e.on_post_like),b(e.on_mention),j(e.on_direct_message),_(e.email_notifications),k(e.push_notifications)}else{let e=await t.json();n({title:"알림 설정 불러오기 실패",description:e.detail||"설정을 불러오는 중 오류가 발생했습니다.",variant:"destructive"})}}catch(e){console.error("Error fetching notification settings:",e),n({title:"오류 발생",description:"네트워크 오류 또는 서버 문제.",variant:"destructive"})}},R=async t=>{if(t.preventDefault(),T(!0),!(null==e?void 0:e.accessToken)){E("인증 토큰이 없습니다."),O(!1);return}try{let t=await fetch("http://localhost:8002/users/me/notifications",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.accessToken)},body:JSON.stringify({on_new_comment:f,on_new_follower:m,on_post_like:g,on_mention:v,on_direct_message:y,email_notifications:w,push_notifications:N})});if(t.ok)n({title:"알림 설정 업데이트 성공",description:"설정이 성공적으로 저장되었습니다."});else{let e=await t.json();n({title:"알림 설정 업데이트 실패",description:e.detail||"설정 업데이트 중 오류가 발생했습니다.",variant:"destructive"})}}catch(e){console.error("Error updating notification settings:",e),n({title:"오류 발생",description:"네트워크 오류 또는 서버 문제.",variant:"destructive"})}finally{T(!1)}};return"loading"===t?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-900 text-white",children:(0,s.jsx)("p",{children:"Loading notification settings..."})}):"unauthenticated"===t?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-900 text-white",children:(0,s.jsx)("p",{children:"Please log in to view notification settings."})}):(0,s.jsx)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,s.jsxs)(l.Zb,{className:"bg-gray-800 border-gray-700 text-white",children:[(0,s.jsxs)(l.Ol,{children:[(0,s.jsx)(l.ll,{className:"text-2xl text-indigo-400",children:"알림 설정"}),(0,s.jsx)(l.SZ,{className:"text-gray-400",children:"어떤 알림을 받을지 관리하세요."})]}),(0,s.jsx)(l.aY,{children:(0,s.jsxs)("form",{onSubmit:R,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(c._,{htmlFor:"onNewComment",children:"새 댓글"}),(0,s.jsx)(d.r,{id:"onNewComment",checked:f,onCheckedChange:h})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(c._,{htmlFor:"onNewFollower",children:"새 팔로워"}),(0,s.jsx)(d.r,{id:"onNewFollower",checked:m,onCheckedChange:p})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(c._,{htmlFor:"onPostLike",children:"게시물 좋아요"}),(0,s.jsx)(d.r,{id:"onPostLike",checked:g,onCheckedChange:x})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(c._,{htmlFor:"onMention",children:"멘션"}),(0,s.jsx)(d.r,{id:"onMention",checked:v,onCheckedChange:b})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(c._,{htmlFor:"onDirectMessage",children:"쪽지"}),(0,s.jsx)(d.r,{id:"onDirectMessage",checked:y,onCheckedChange:j})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(c._,{htmlFor:"emailNotifications",children:"이메일 알림"}),(0,s.jsx)(d.r,{id:"emailNotifications",checked:w,onCheckedChange:_})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(c._,{htmlFor:"pushNotifications",children:"푸시 알림"}),(0,s.jsx)(d.r,{id:"pushNotifications",checked:N,onCheckedChange:k})]}),(0,s.jsx)(o.z,{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700",disabled:S,children:S?"저장 중...":"변경 사항 저장"})]})})]})})}},2869:function(e,t,n){"use strict";n.d(t,{d:function(){return c},z:function(){return d}});var s=n(7437),i=n(2265),r=n(7053),a=n(535),o=n(4508);let c=(0,a.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=i.forwardRef((e,t)=>{let{className:n,variant:i,size:a,asChild:d=!1,...l}=e,u=d?r.g7:"button";return(0,s.jsx)(u,{className:(0,o.cn)(c({variant:i,size:a,className:n})),ref:t,...l})});d.displayName="Button"},6070:function(e,t,n){"use strict";n.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return a},aY:function(){return l},eW:function(){return u},ll:function(){return c}});var s=n(7437),i=n(2265),r=n(4508);let a=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",n),...i})});a.displayName="Card";let o=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",n),...i})});o.displayName="CardHeader";let c=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",n),...i})});c.displayName="CardTitle";let d=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",n),...i})});d.displayName="CardDescription";let l=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",n),...i})});l.displayName="CardContent";let u=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",n),...i})});u.displayName="CardFooter"},6815:function(e,t,n){"use strict";n.d(t,{_:function(){return d}});var s=n(7437),i=n(2265),r=n(6394),a=n(535),o=n(4508);let c=(0,a.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,s.jsx)(r.f,{ref:t,className:(0,o.cn)(c(),n),...i})});d.displayName=r.f.displayName},1828:function(e,t,n){"use strict";n.d(t,{r:function(){return o}});var s=n(7437),i=n(2265),r=n(721),a=n(4508);let o=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,s.jsx)(r.fC,{className:(0,a.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...i,ref:t,children:(0,s.jsx)(r.bU,{className:(0,a.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});o.displayName=r.fC.displayName},7992:function(e,t,n){"use strict";n.d(t,{pm:function(){return f}});var s=n(2265);let i=0,r=new Map,a=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:n}=t;return n?a(n):e.toasts.forEach(e=>{a(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],d={toasts:[]};function l(e){d=o(d,e),c.forEach(e=>{e(d)})}function u(e){let{...t}=e,n=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>l({type:"DISMISS_TOAST",toastId:n});return l({type:"ADD_TOAST",toast:{...t,id:n,open:!0,onOpenChange:e=>{e||s()}}}),{id:n,dismiss:s,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:n}})}}function f(){let[e,t]=s.useState(d);return s.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}},4508:function(e,t,n){"use strict";n.d(t,{cn:function(){return r}});var s=n(1994),i=n(3335);function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,i.m6)((0,s.W)(t))}}},function(e){e.O(0,[6137,605,2021,6728,2971,2117,1744],function(){return e(e.s=6462)}),_N_E=e.O()}]);