(()=>{var e={};e.id=9671,e.ids=[9671],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},92173:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>f,tree:()=>d}),a(45818),a(54105),a(11506),a(35866);var r=a(23191),s=a(88716),i=a(37922),n=a.n(i),l=a(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(t,o);let d=["",{children:["settings",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,45818)),"C:\\Users\\hanbi\\OneDrive\\바탕 화면\\my-news-app\\frontend\\app\\settings\\profile\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,54105)),"C:\\Users\\hanbi\\OneDrive\\바탕 화면\\my-news-app\\frontend\\app\\settings\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,11506)),"C:\\Users\\hanbi\\OneDrive\\바탕 화면\\my-news-app\\frontend\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(a.bind(a,19644)),"C:\\Users\\hanbi\\OneDrive\\바탕 화면\\my-news-app\\frontend\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\hanbi\\OneDrive\\바탕 화면\\my-news-app\\frontend\\app\\settings\\profile\\page.tsx"],u="/settings/profile/page",p={require:a,loadChunk:()=>Promise.resolve()},f=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/settings/profile/page",pathname:"/settings/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},22475:(e,t,a)=>{Promise.resolve().then(a.bind(a,79558))},64266:(e,t,a)=>{Promise.resolve().then(a.bind(a,62483))},79558:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var r=a(10326),s=a(62881);let i=(0,s.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var n=a(58038);let l=(0,s.Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),o=(0,s.Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var d=a(90434),c=a(35047),u=a(77863),p=a(64637);let f=({href:e,icon:t,label:a,isActive:s})=>r.jsx(d.default,{href:e,passHref:!0,legacyBehavior:!0,children:(0,r.jsxs)(p.E.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:(0,u.cn)("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors",s?"bg-indigo-600 text-white shadow-md":"text-gray-300 hover:bg-gray-700 hover:text-white"),children:[t,a]})});function m({children:e}){let t=(0,c.usePathname)(),a=[{href:"/settings/profile",icon:r.jsx(i,{className:"h-4 w-4"}),label:"프로필"},{href:"/settings/privacy",icon:r.jsx(n.Z,{className:"h-4 w-4"}),label:"개인 정보"},{href:"/settings/notifications",icon:r.jsx(l,{className:"h-4 w-4"}),label:"알림"},{href:"/settings/account",icon:r.jsx(o,{className:"h-4 w-4"}),label:"계정"}];return r.jsx("div",{className:"min-h-screen bg-gray-900 text-white p-4 sm:p-6 lg:p-8",children:(0,r.jsxs)(p.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-6xl mx-auto grid lg:grid-cols-4 gap-6",children:[(0,r.jsxs)("aside",{className:"lg:col-span-1 bg-gray-800 rounded-lg shadow-lg p-4 space-y-2",children:[r.jsx("h2",{className:"text-xl font-bold mb-4 text-indigo-400",children:"설정"}),r.jsx("nav",{className:"grid gap-1",children:a.map(e=>r.jsx(f,{href:e.href,icon:e.icon,label:e.label,isActive:t===e.href},e.href))})]}),r.jsx("main",{className:"lg:col-span-3 bg-gray-800 rounded-lg shadow-lg p-6",children:e})]})})}},62483:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var r=a(10326),s=a(35047),i=a(77109),n=a(34789),l=a(33071),o=a(17577),d=a(90772),c=a(54432),u=a(45842),p=a(85562);function f(){let{data:e,update:t}=(0,i.useSession)(),{toast:a}=(0,n.pm)(),[s,l]=(0,o.useState)(e?.user?.nickname||""),[f,m]=(0,o.useState)(e?.user?.avatar_url||""),[g,h]=(0,o.useState)(e?.user?.email||""),[x,v]=(0,o.useState)(!1),[y,b]=(0,o.useState)(""),[w,j]=(0,o.useState)(null),[N,S]=(0,o.useState)(null),_=async r=>{if(r.preventDefault(),v(!0),b(""),!e?.accessToken){b("인증 토큰이 없습니다. 다시 로그인해주세요."),v(!1);return}console.log("Access Token:",e.accessToken);let i=f;try{if(w){let e=new FormData;e.append("file",w);let t=await fetch("http://localhost:8002/upload/avatar",{method:"POST",body:e});if(t.ok){let e=await t.json();i=`http://localhost:8002${e.url}`,console.log("DEBUG: Uploaded avatar URL from backend:",e.url),console.log("DEBUG: Final avatar URL for PUT request:",i)}else{let e=await t.json();b(e.detail||"이미지 업로드 실패."),a({title:"이미지 업로드 실패",description:e.detail||"이미지 업로드 중 오류가 발생했습니다.",variant:"destructive"}),v(!1);return}}let r=await fetch("http://localhost:8002/users/me/",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e?.accessToken}`},body:JSON.stringify({nickname:s,avatar_url:i})});if(r.ok){let s=await r.json();await t({user:{...e?.user,nickname:s.nickname,avatar_url:s.avatar_url}}),m(s.avatar_url),S(null),j(null),console.log("DEBUG: Session updated with new avatar_url:",s.avatar_url),a({title:"프로필 업데이트 성공!",description:"프로필 정보가 성공적으로 업데이트되었습니다."})}else{let e=await r.json();b(e.detail||"프로필 업데이트 실패."),a({title:"프로필 업데이트 실패",description:e.detail||"다시 시도해주세요.",variant:"destructive"})}}catch(e){b("예상치 못한 오류가 발생했습니다."),a({title:"오류 발생",description:"예상치 못한 오류가 발생했습니다.",variant:"destructive"})}finally{v(!1)}};return(0,r.jsxs)("form",{onSubmit:_,className:"space-y-6",children:[y&&r.jsx("p",{className:"text-sm text-red-400",children:y}),(0,r.jsxs)("div",{children:[r.jsx(u._,{htmlFor:"email",children:"Email"}),r.jsx(c.I,{id:"email",type:"email",value:g,disabled:!0,className:"mt-1 bg-gray-700 border-gray-600 text-gray-400"})]}),(0,r.jsxs)("div",{children:[r.jsx(u._,{htmlFor:"nickname",children:"Nickname"}),r.jsx(c.I,{id:"nickname",value:s,onChange:e=>l(e.target.value),className:"mt-1 bg-gray-700 border-gray-600 text-white focus:border-indigo-500 focus:ring-indigo-500"})]}),(0,r.jsxs)("div",{children:[r.jsx(u._,{htmlFor:"avatar",children:"Profile Picture"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mt-1",children:[(0,r.jsxs)(p.qE,{className:"h-20 w-20",children:[r.jsx(p.F$,{src:N||e?.user?.avatar_url||void 0,alt:"Profile Picture"},N||e?.user?.avatar_url||"default"),r.jsx(p.Q5,{children:"CN"})]}),r.jsx(c.I,{id:"avatar",type:"file",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files[0]){let t=e.target.files[0];j(t),S(URL.createObjectURL(t))}else j(null),S(f)},className:"flex-grow bg-gray-700 border-gray-600 text-white focus:border-indigo-500 focus:ring-indigo-500"})]})]}),r.jsx(d.z,{type:"submit",disabled:x,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white",children:x?"Updating...":"Update Profile"})]})}function m({nickname:e,avatarUrl:t,email:a}){return(0,r.jsxs)(l.Zb,{className:"w-full max-w-md mx-auto bg-gray-800 text-white border-gray-700",children:[(0,r.jsxs)(l.Ol,{className:"text-center",children:[(0,r.jsxs)(p.qE,{className:"h-24 w-24 mx-auto mb-4 border-4 border-indigo-500",children:[r.jsx(p.F$,{src:t||void 0,alt:`${e}'s avatar`}),r.jsx(p.Q5,{children:e.charAt(0).toUpperCase()})]}),r.jsx(l.ll,{className:"text-2xl font-bold",children:e}),r.jsx(l.SZ,{className:"text-gray-400",children:a})]}),r.jsx(l.aY,{className:"text-center",children:r.jsx("p",{className:"text-gray-300",children:"Welcome to your personalized profile!"})})]})}function g(){let{data:e,status:t}=(0,i.useSession)(),a=(0,s.useRouter)(),{toast:o}=(0,n.pm)();return"loading"===t?r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900 text-white",children:"Loading profile..."}):e?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-900 text-white p-4 space-y-6",children:[e.user&&r.jsx(m,{nickname:e.user.nickname||"",avatarUrl:e.user.avatar_url||void 0,email:e.user.email||""},e.user.avatar_url||"default"),(0,r.jsxs)(l.Zb,{className:"w-full max-w-2xl bg-gray-800 border-gray-700 text-white",children:[(0,r.jsxs)(l.Ol,{children:[r.jsx(l.ll,{className:"text-2xl font-bold text-indigo-400",children:"프로필 설정"}),r.jsx(l.SZ,{className:"text-gray-400",children:"프로필 정보 및 비밀번호를 관리하세요."})]}),r.jsx(l.aY,{children:r.jsx(f,{})})]})]}):(a.push("/login"),null)}},85562:(e,t,a)=>{"use strict";a.d(t,{qE:()=>b,Q5:()=>j,F$:()=>w});var r=a(10326),s=a(17577),i=a(93095),n=a(55049),l=a(65819),o=a(45226),d="Avatar",[c,u]=(0,i.b)(d),[p,f]=c(d),m=s.forwardRef((e,t)=>{let{__scopeAvatar:a,...i}=e,[n,l]=s.useState("idle");return(0,r.jsx)(p,{scope:a,imageLoadingStatus:n,onImageLoadingStatusChange:l,children:(0,r.jsx)(o.WV.span,{...i,ref:t})})});m.displayName=d;var g="AvatarImage",h=s.forwardRef((e,t)=>{let{__scopeAvatar:a,src:i,onLoadingStatusChange:d=()=>{},...c}=e,u=f(g,a),p=function(e,t){let[a,r]=s.useState("idle");return(0,l.b)(()=>{if(!e){r("error");return}let a=!0,s=new window.Image,i=e=>()=>{a&&r(e)};return r("loading"),s.onload=i("loaded"),s.onerror=i("error"),s.src=e,t&&(s.referrerPolicy=t),()=>{a=!1}},[e,t]),a}(i,c.referrerPolicy),m=(0,n.W)(e=>{d(e),u.onImageLoadingStatusChange(e)});return(0,l.b)(()=>{"idle"!==p&&m(p)},[p,m]),"loaded"===p?(0,r.jsx)(o.WV.img,{...c,ref:t,src:i}):null});h.displayName=g;var x="AvatarFallback",v=s.forwardRef((e,t)=>{let{__scopeAvatar:a,delayMs:i,...n}=e,l=f(x,a),[d,c]=s.useState(void 0===i);return s.useEffect(()=>{if(void 0!==i){let e=window.setTimeout(()=>c(!0),i);return()=>window.clearTimeout(e)}},[i]),d&&"loaded"!==l.imageLoadingStatus?(0,r.jsx)(o.WV.span,{...n,ref:t}):null});v.displayName=x;var y=a(77863);let b=s.forwardRef(({className:e,...t},a)=>r.jsx(m,{ref:a,className:(0,y.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));b.displayName=m.displayName;let w=s.forwardRef(({className:e,...t},a)=>r.jsx(h,{ref:a,className:(0,y.cn)("aspect-square h-full w-full",e),...t}));w.displayName=h.displayName;let j=s.forwardRef(({className:e,...t},a)=>r.jsx(v,{ref:a,className:(0,y.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));j.displayName=v.displayName},90772:(e,t,a)=>{"use strict";a.d(t,{d:()=>o,z:()=>d});var r=a(10326),s=a(17577),i=a(34214),n=a(79360),l=a(77863);let o=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef(({className:e,variant:t,size:a,asChild:s=!1,...n},d)=>{let c=s?i.g7:"button";return r.jsx(c,{className:(0,l.cn)(o({variant:t,size:a,className:e})),ref:d,...n})});d.displayName="Button"},54432:(e,t,a)=>{"use strict";a.d(t,{I:()=>n});var r=a(10326),s=a(17577),i=a(77863);let n=s.forwardRef(({className:e,type:t,...a},s)=>r.jsx("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...a}));n.displayName="Input"},45842:(e,t,a)=>{"use strict";a.d(t,{_:()=>c});var r=a(10326),s=a(17577),i=a(45226),n=s.forwardRef((e,t)=>(0,r.jsx)(i.WV.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));n.displayName="Label";var l=a(79360),o=a(77863);let d=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef(({className:e,...t},a)=>r.jsx(n,{ref:a,className:(0,o.cn)(d(),e),...t}));c.displayName=n.displayName},34789:(e,t,a)=>{"use strict";a.d(t,{pm:()=>p});var r=a(17577);let s=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=l(d,e),o.forEach(e=>{e(d)})}function u({...e}){let t=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function p(){let[e,t]=r.useState(d);return r.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},58038:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(62881).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},54105:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(68570).createProxy)(String.raw`C:\Users\hanbi\OneDrive\바탕 화면\my-news-app\frontend\app\settings\layout.tsx#default`)},45818:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(68570).createProxy)(String.raw`C:\Users\hanbi\OneDrive\바탕 화면\my-news-app\frontend\app\settings\profile\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[8948,4930,6621,434,4637,9021],()=>a(92173));module.exports=r})();